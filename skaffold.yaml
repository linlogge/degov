apiVersion: skaffold/v4beta13
kind: Config
build:
  artifacts:
    - image: degov/chancelor
      context: .
      docker:
        dockerfile: deployment/docker/chancelor/Dockerfile.dev
    - image: degov/kube-operator
      context: .
      docker:
        dockerfile: deployment/docker/kube-operator/Dockerfile.dev
    - image: degov/frontdoor
      context: .
      docker:
        dockerfile: deployment/docker/frontdoor/Dockerfile.dev
  local:
    push: false
    concurrency: 0
deploy:
  helm:
    releases:
      - name: degov
        chartPath: deployment/helm/degov
        setValues:
          image.repository: degov
          image.tag: skaffold
          frontdoor.ingress.enabled: true
        skipBuildDependencies: true
